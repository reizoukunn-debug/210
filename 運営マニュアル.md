# 運営マニュアル

このアプリケーションは、運営が事前に登録したメールアドレスとパスワードを知っている人のみがログインできます。

## ユーザー登録方法

### 方法1: コマンドライン（推奨）

サーバーのディレクトリで以下のコマンドを実行：

```bash
cd server
npm run admin:add-user <メールアドレス> <パスワード> <ユーザー名>
```

**例:**
```bash
npm run admin:add-user user1@example.com password123 ユーザー1
npm run admin:add-user user2@example.com password456 ユーザー2
```

### 方法2: API経由（管理パスワード必要）

管理パスワードを環境変数に設定：

```bash
# Renderの場合、環境変数に追加
ADMIN_PASSWORD=your-admin-password-here
```

その後、APIを呼び出し：

```bash
curl -X POST https://your-backend.onrender.com/api/register \
  -H "Content-Type: application/json" \
  -d '{
    "email": "user@example.com",
    "password": "password123",
    "username": "ユーザー名",
    "adminPassword": "your-admin-password-here"
  }'
```

## ユーザー一覧の確認

データベースファイルを直接確認するか、SQLiteコマンドを使用：

```bash
cd server
sqlite3 data/minigame.db "SELECT id, email, username, points FROM users;"
```

## ユーザーの削除

```bash
cd server
sqlite3 data/minigame.db "DELETE FROM users WHERE email = 'user@example.com';"
```

## パスワードのリセット

現在は直接データベースを操作する必要があります。将来的に管理画面を追加予定。

## 注意事項

- ユーザー登録は運営のみが行えます
- 一般ユーザーは登録できません
- メールアドレスとパスワードを知っている人のみがログイン可能
- 初期ポイントは1000ptです

